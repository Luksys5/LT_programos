#!/usr/bin/perl -w

#*
# print the usage information of the script
#**

use strict;

if( @ARGV == 0 ) {
    print "$0: need a name of a file or a command as an argument\n";
    exit 1;
}

my $filename = shift(@ARGV);

if( ! -f $filename ) {
    my @file = split( " ", `sh -c 'type $filename'` );
    $filename = $file[2] if $? == 0;
}

if( @ARGV > 0 ) {
    local $\ = "\n";
    local $, = " ";
    print "\n", $filename, @ARGV;
};

@ARGV = ( $filename );

while(<>) {
    if( /^ *#\*/ .. /^ *#\*\*/ ) {
        s/^ *#[*]?[*]?//;
        s/\$0/$ARGV/g;
	print;
    }
}
