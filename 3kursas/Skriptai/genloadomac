#!/bin/sh

set -ue

{
echo "@autoomac T"
for file in "${@}"
do
   ## echo "print reading ${file}"
   echo "read ${file}"
done
} |\
awk 'BEGIN  { n = 0; maxlen = 0 }
     $2 ~ /^T$/ { name = $1 }
     $2 !~ /^T$/ {
         script[n] = $0;
         n++;
         if( maxlen < length )
             maxlen = length;
     }
     END {
         printf "%-26s%-9s%3d%9s%2d\n", name, "T", n, "", maxlen+1;
         for( i = 0; i < n; i++ ) { 
             print script[i];
         }
     }' -
